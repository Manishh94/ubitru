o: ActiveSupport::Cache::Entry	:@compressedF:@expires_in0:@created_atf1424851606.3106828:@value{I"
class:ETI"BundledAsset;
FI"id;
TI"%94813406ac9f7dd9cfcb7bff4683d59f;
FI"logical_path;
TI"users/surveys.js;
FI"pathname;
TI"2$root/app/assets/javascripts/users/surveys.js;
FI"content_type;
TI"application/javascript;
TI"
mtime;
TI"2015-02-13T19:00:53+05:00;
TI"	body;
TI"	$(document).ready(function(){
  var wrap = $('#question-window ul');
  var step = wrap.children(':first').outerWidth();
  wrap.css('height','auto');
  wrap.width(wrap.children().length * step);
  
  var curNum = function(){
    var hashNum = parseInt(window.location.hash.replace('#',''), 10);
    return isNaN(hashNum) ? 1 : hashNum || 1
  }
  
  var setPage = function(){
    var qNum = curNum()
    
    $('#survey-back')[qNum == 1 ? 'hide': 'show']();
    
    $('#survey-next')[$('#question-num-' + qNum).hasClass('last') ? 'hide' : 'show']();
    $('#survey-skip')[$('#question-num-' + qNum).hasClass('last') ? 'hide' : 'show']();
    $('#survey-save-no-social')[$('#question-num-' + qNum).hasClass('last') ? 'show' : 'hide']();
    
    if($('#question-num-' + qNum).find('input:checked').length) {
      $('#survey-next').removeAttr('disabled');
    } else {
      $('#survey-next').attr('disabled', true);
    }
    
    wrap.stop(true,true)
    var lft = (qNum-1) * -step;
    var curLft = parseInt(wrap.css('margin-left'),10);
    if(lft == curLft) return;
    wrap.animate({marginLeft: lft}, 300, 'swing');
  }
  
  var go = function(back) {
    var qNum = curNum()
    var max = $('.question-wrap.last')[0].id.replace('question-num-','')
    window.location.hash = Math.max(1, Math.min(max, (qNum + (back?-1:1))));
  }
  
  $(window).bind('hashchange', function() {
    setPage();
  });
  
  $('#survey-next').click(function(){go()});
  $('#survey-back').click(function(){go(true)});
  $('#survey-skip').click(function(){
    var qNum = curNum();
    $('#question-num-' + qNum).find('input:checked').attr('checked', false);
    resolveScore();
    go();
  });
  
  var resolveScore = function(){
    var score = $('#your-score-stamp span');
    var val = parseInt(score.data('score'),10)
    if(!val) return;

    $('.question-wrap').each(function(){
     if($(this).find('input:checked').length) {
       val += POINTS_FOR_SURVEY_QUESTION
     }
    })
    if(parseInt(score.text(),10) != val) {
     score.hide().text(val).fadeIn()
    }
  }
  
  $('input:radio').change(function(){
     var qNum = curNum();
     if($(this).closest($('#question-num-' + qNum).length)) {
       $('#survey-next').removeAttr('disabled');
     }
     resolveScore();
  })
  
  setPage();
  resolveScore();
  
});
;
TI"asset_paths;
T[I"2$root/app/assets/javascripts/users/surveys.js;
FI"dependency_paths;
T[{I"	path;
TI"2$root/app/assets/javascripts/users/surveys.js;
FI"
mtime;
TIu:	TimeÆ≈Ä¨ùU
:nano_numiõ:nano_deni:submicro"í0:offsetiPF:	zoneI"PKT;
TI"hexdigest;
TI"%c8c3afa9faf582d3ca9001833eba1390;
FI"_version;
TI"%df7525e917401704ef453cb56bf16697;
F