%section.panel-area.whiteBoxBg
  .container-fuild
    .row
      .subtitle.fancy
        %span
          %h3.title
            Browse these stores for more great offers and cash back!
    .row.panel-content
      - unless @browse_stores.blank?
        .outer-div.col-xs-12
          .outer-inner
            - @browse_stores.compact.in_groups_of(4,false) do |group|
              - group.each do |advertiser|
                .col-sm-6.col-xs-12.col-md-4.col-lg-3
                  .panel{:style => "position:relative;"}
                    .wrapper
                      .ribbon-wrapper-green
                        .ribbon-green
                          %a{href:"#"}
                            = "#{number_to_percentage(advertiser.max_commission_percent, {:precision => 1, :strip_insignificant_zeros => true})} CASH BACK"
                    .panel-logo
                      - if advertiser.hp_advertiser_image.blank?
                        = link_to(image_tag(advertiser.is_a?(LinkshareAdvertiser) ? advertiser.logo_url : advertiser.logo.url, :title => advertiser.name), "javascript:void(0);", :id => "merchant_popup_#{advertiser.advertiser_id}", :class => "img-responsive", :onclick => "generate_popup(this.id, #{advertiser.advertiser_id}, #{advertiser.coupons.blank?}); return false;")
                        = link_to "coupon_window", mm_prompt_cc_window_path(:ad => advertiser.advertiser_id, :type => advertiser.class.name, :offer_url => advertiser.advertiser_url), :style => "display:none;", :id => "merchant_c_window_#{advertiser.advertiser_id}"
                      - else
                        = link_to(image_tag(advertiser.is_a?(LinkshareAdvertiser) ? advertiser.logo_url : advertiser.logo.url, :title => advertiser.name), "javascript:void(0);", :id => "merchant_popup_#{advertiser.advertiser_id}", :class => "img-responsive", :onclick => "generate_popup(this.id, #{advertiser.advertiser_id}, #{advertiser.coupons.blank?}); return false;")
                        = link_to "coupon_window", mm_prompt_cc_window_path(:ad => advertiser.advertiser_id, :type => advertiser.class.name, :offer_url => advertiser.advertiser_url), :style => "display:none;", :id => "merchant_c_window_#{advertiser.advertiser_id}"
                    .panel-info.panel-bottom
                      .row
                        .col-xs-12
                          = "25 % off deals"              

:javascript
  $(document).ready(function(){
    

    $('#right-arrow-button').click(function(){
      console.log("clicked");
      var scrollAmount = $('.outer-inner').width() - $('.outer-inner').parent().width();
      console.log(scrollAmount);
      var currentPos = Math.abs(parseInt($('.outer-inner').css('left')));
      var remainingScroll = scrollAmount - currentPos;
    
      // Scroll half-a-screen by default
      var nextScroll = Math.floor($('.outer-inner').parent().width() / 2);
    
      // But if there isnâ€™t a FULL scroll left, do only the remaining amount.
      if (remainingScroll < nextScroll) {
        nextScroll = remainingScroll;
      }
     
      if (currentPos < scrollAmount) {
        // Scroll left
        $('.outer-inner').animate({'left':'-=' + nextScroll}, 'slow');
      }
      else {
        // Scroll right
        $('.outer-inner').animate({'left':'0'}, 'fast');
      }
    });
  });


:css

  .ribbon-wrapper-green {
      width: 162px;
    height: 133px;
    overflow: hidden;
    position: absolute;
  }

  .ribbon-green{
      font: bold 15px Sans-Serif;
  color: #white;
  text-align: center;
  text-shadow: rgba(255,255,255,0.5) 0px 1px 0px;
  -webkit-transform: rotate(-44deg);
  -moz-transform: rotate(-44deg);
  -ms-transform: rotate(-44deg);
  -o-transform: rotate(-44deg);
  position: relative;
  padding: 7px 0;
  left: -32px;
  top: 32px;
  /* width: 138px; */
  background-color: #FA7B00;
  background-image: -webkit-gradient(linear, left top, left bottom, from(#FA7B00), to(#FA7B00));
  background-image: -webkit-linear-gradient(top, #FA7B00, #FA7B00);
  background-image: -moz-linear-gradient(top, #FA7B00, #FA7B00);
  background-image: -ms-linear-gradient(top, #FA7B00,#FA7B00);
  background-image: -o-linear-gradient(top, #FA7B00, #FA7B00);
  color: #6a6340;
  -webkit-box-shadow: 0px 0px 3px rgba(0,0,0,0.3);
  -moz-box-shadow: 0px 0px 3px rgba(0,0,0,0.3);
  box-shadow: 0px 0px 3px rgba(0,0,0,0.3);
  box-shadow: 3px 1px 2px 0px #000;
  }

  .ribbon-green a{
    text-decoration: none;
    color: white;
  }

  .panel-bottom{
      background-color: #F7F7F7;
    padding: 17px;
    font-size: 20px;
    text-align: center;
    bottom: 0;
    position: absolute;
    width: 100%;

  }
