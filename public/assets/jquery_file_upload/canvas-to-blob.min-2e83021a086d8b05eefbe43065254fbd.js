!function(e){"use strict";var t=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder,i=/^image\/(jpeg|png)$/,n=function(e,s,o){if(o=o||{},e.toBlob)return e.toBlob(s,o.type),!0;if(e.mozGetAsFile){var a=o.name;return s(e.mozGetAsFile(i.test(o.type)&&a||(a&&a.replace(/\..+$/,"")||"blob")+".png",o.type)),!0}return e.toDataURL&&t&&window.atob&&window.ArrayBuffer&&window.Uint8Array?(s(n.dataURItoBlob(e.toDataURL(o.type))),!0):!1};n.dataURItoBlob=function(e){var i,n,s,o,a,r;for(i=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),n=new ArrayBuffer(i.length),s=new Uint8Array(n),o=0;o<i.length;o+=1)s[o]=i.charCodeAt(o);return a=new t,a.append(n),r=e.split(",")[0].split(":")[1].split(";")[0],a.getBlob(r)},"undefined"!=typeof define&&define.amd?define(function(){return n}):e.canvasToBlob=n}(this);