!function(t){"use strict";var e=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder,i=/^image\/(jpeg|png)$/,n=function(t,s,o){if(o=o||{},t.toBlob)return t.toBlob(s,o.type),!0;if(t.mozGetAsFile){var a=o.name;return s(t.mozGetAsFile(i.test(o.type)&&a||(a&&a.replace(/\..+$/,"")||"blob")+".png",o.type)),!0}return t.toDataURL&&e&&window.atob&&window.ArrayBuffer&&window.Uint8Array?(s(n.dataURItoBlob(t.toDataURL(o.type))),!0):!1};n.dataURItoBlob=function(t){var i,n,s,o,a,r;for(i=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),n=new ArrayBuffer(i.length),s=new Uint8Array(n),o=0;o<i.length;o+=1)s[o]=i.charCodeAt(o);return a=new e,a.append(n),r=t.split(",")[0].split(":")[1].split(";")[0],a.getBlob(r)},"undefined"!=typeof define&&define.amd?define(function(){return n}):t.canvasToBlob=n}(this);