!function(e){"use strict";var t=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder,i=/^image\/(jpeg|png)$/,n=function(e,s,a){if(a=a||{},e.toBlob)return e.toBlob(s,a.type),!0;if(e.mozGetAsFile){var o=a.name;return s(e.mozGetAsFile(i.test(a.type)&&o||(o&&o.replace(/\..+$/,"")||"blob")+".png",a.type)),!0}return e.toDataURL&&t&&window.atob&&window.ArrayBuffer&&window.Uint8Array?(s(n.dataURItoBlob(e.toDataURL(a.type))),!0):!1};n.dataURItoBlob=function(e){var i,n,s,a,o,r;for(i=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),n=new ArrayBuffer(i.length),s=new Uint8Array(n),a=0;a<i.length;a+=1)s[a]=i.charCodeAt(a);return o=new t,o.append(n),r=e.split(",")[0].split(":")[1].split(";")[0],o.getBlob(r)},"undefined"!=typeof define&&define.amd?define(function(){return n}):e.canvasToBlob=n}(this);