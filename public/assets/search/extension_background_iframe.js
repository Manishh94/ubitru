var EXT={};EXT.WEB_APP_HOST="muddleme.com",EXT.ORIGINS=["http://www.google.com","https://www.google.com","http://www.yahoo.com","https://www.yahoo.com","http://search.yahoo.com","https://search.yahoo.com","https://www.bing.com","http://www.bing.com"],EXT.SIGNED_IN_COOKIE_NAME="signed_in",EXT.CHECK_USER_SESSION_COMMAND="extension.check.user.session.",EXT.GET_USER_INFO_COMMAND="extension.get.user.info",EXT.LOGIN_COMMAND="extension.login",EXT.LOGOUT_COMMAND="extension.logout",EXT.ACTIVATE_MERCHANT_COMMAND="extension.activate.merchant",EXT.SEARCH_COMMAND="extension.search",EXT.SEARCH_BY_LINKS_COMMAND="extension.search.by.links",EXT.CHECK_USER_MESSAGES_COMMAND="extension.check.user.messages",EXT.GET_USER_MESSAGES_COMMAND="extension.get.user.messages",EXT.REMOVE_USER_MESSAGE_COMMAND="extension.remove.user.message",EXT.SEARCH_LITE_COMMAND="extension.search.lite",$(function(){function e(e,t){var n=e.command,s=e.request.body||e.request.params||{};s.extension_origin=t,$.ajax(e.request.url,{type:e.request.method,data:s}).done(function(e){window.parent.postMessage({command:n,response:e},i)}).fail(function(e){window.parent.postMessage({command:n,response:{success:!1,message:e.responseText}},i)})}function t(t){if(-1!=$.inArray(t.origin,EXT.ORIGINS)){i=t.origin;var n=t.data;switch(n.command){case EXT.CHECK_USER_SESSION_COMMAND:window.parent.postMessage({command:n.command,response:void 0!=$.cookie(EXT.SIGNED_IN_COOKIE_NAME)},i);break;case EXT.CHECK_USER_MESSAGES_COMMAND:window.parent.postMessage({command:n.command,response:$.cookie("user_messages_count")},i);break;case EXT.GET_USER_INFO_COMMAND:case EXT.LOGIN_COMMAND:case EXT.LOGOUT_COMMAND:case EXT.SEARCH_COMMAND:case EXT.SEARCH_BY_LINKS_COMMAND:case EXT.ACTIVATE_MERCHANT_COMMAND:case EXT.GET_USER_MESSAGES_COMMAND:case EXT.REMOVE_USER_MESSAGE_COMMAND:case EXT.SEARCH_LITE_COMMAND:e(n,t.origin)}}}var i;window.addEventListener("message",t,!1)});