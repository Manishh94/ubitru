$(function(){function t(t){for(var e in t)return e}$(document).ajaxStart(function(){$(".loader").css("display","inline-block")}),$(document).ajaxStop(function(){$(".loader").hide()}),$(document).on("change","#category",function(){var e=$(this).val();$.ajax({type:"get",url:"/admin/add_storecat_to_merchant/get_merchants_list",data:{cat_id:e},success:function(e){for(var a=e.length,n='<h3>Select Merchant</h3><select id="merchant">',c=0;a>c;c++){var r=t(e[c]);if(1==r)var s="Cj";if(2==r)var s="Pj";if(3==r)var s="Avant";if(4==r)var s="Linkshare";if(5==r)var s="Ir";n=n+'<option value="'+s+"-"+e[c].id+'"  >'+e[c].name+"</option>"}n+='</select> &nbsp; <input type="button" id="AddMerchant" value="Add" />',$(".merchant_content").html(n).show()}})}),$(document).on("change","#category",function(){var t=$("#category").val();$.ajax({type:"get",url:"/admin/add_storecat_to_merchant/get_selected_merchants_list",data:{cat_id:t},success:function(t){var e='<h3>Added Merchants List</h3><div class="input tags advertisers-tags">';len=t.length;for(var a=0;len>a;a++){item=t[a];var n=item[0].name;e=e+'<div class="tag "> &nbsp; '+n+' | <span title="Remove" class="removeMarchant" id="rem-'+item[1]+'">X</span></div>'}e+="</div>",$(".selected_merchant_content").html(e).show()}})}),$(document).on("click",".removeMarchant",function(){var t=$(this).prop("id");id_arr=t.split("-"),id=id_arr[1];var e=$("meta[name='csrf-token']").attr("content");$.ajax({type:"delete",url:"/admin/add_storecat_to_merchant/remove_selected_merchant",headers:{"X-CSRF-Token":e},data:{id:id},success:function(e){$("#"+t).parent("div").remove(),$(".message").html("<b>"+e+"</b>").css("margin-left","20%").show().fadeOut(5e3)}})}),$(document).on("click","#AddMerchant",function(){var t=$("#category").val(),e=$("#merchant").val(),a=e.split("-"),n=a[0],c=a[1],r=$("meta[name='csrf-token']").attr("content");$.ajax({type:"post",url:"/admin/add_storecat_to_merchant/add_merchant",headers:{"X-CSRF-Token":r},data:{cat_id:t,merchant_id:c,merchant_type:n},success:function(t){$(".message").html("<b>"+t+"</b>").css("margin-left","20%").show().fadeOut(5e3),"Merchent Added successfully"==t&&$("#category").trigger("change")}})}),$("#category").trigger("change")});